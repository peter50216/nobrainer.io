<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title>Changelog · NoBrainer</title>
  <link rel="stylesheet" href="/css/screen.css" />
</head>

<body class="wrap">
  <header>
  <div class="grid">
    <div class="unit one-fifth"> </div>
    <div class="unit four-fifths">
      <h1> <a href="/"> <span>NoBrainer</span> </a> </h1>
      <h3>A Ruby ORM for RethinkDB</h3>
    </div>
  </div>

<!-- put back when we do it properly for mobiles -->
<!-- <a href="https://github.com/nviennot/nobrainer"><img style="position: absolute; top: 0; right:0; border: 0; width: 149px; height: 149px;" src="/img/forkme.png" alt="Fork me on GitHub"></a> -->

</header>


  <section class="docs">
  <div class="grid">

    <div class="unit one-fifth">
  <aside>
    <h4>Getting Started</h4> 

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/introduction/">Introduction</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/installation/">Installation</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/differences_from_other_orms/">Differences from other ORMs</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
</ul>

    <h4>Models</h4>          

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/models/">Models</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/fields/">Fields</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/types/">Types</a></li>
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/timestamps/">Timestamps</a></li>
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/serialization/">Serialization</a></li>
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/persistence/">Persistence</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/callbacks/">Callbacks</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/validations/">Validations</a></li>
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/dirty_tracking/">Dirty Tracking</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
      <li class=""><a href="/docs/associations/">Associations</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
</ul>

    <h4>Querying</h4>        

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/querying/">Querying</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/scopes/">Scopes</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/joins/">Joins</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/eager_loading/">Eager Loading</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
</ul>

    <h4>Advanced Topics</h4> 

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/rql_layer/">RQL Layer</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/indexes/">Indexes</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/atomic_ops/">Atomic Operations</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/distributed_locks/">Distributed Locks</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/db_management/">DB Management</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/table_configuration/">Table Configuration</a></li>
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/multi_tenancy/">Multi Tenancy</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/caching/">Caching</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/event_machine/">Event Machine</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
</ul>

    <h4>Recipes</h4>         

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/real_time_tutorial/">Real Time Tutorial</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
</ul>

    <h4>Miscellaneous</h4>   

<ul>

  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/roadmap/">Roadmap</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class="current"><a href="/docs/changelog/">Changelog</a></li>
    
  


  

  
    
  

  
    
  
    
      <li class=""><a href="/docs/3rd_party_integration/">3rd-party Integration</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/communication/">Communication</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/faq/">FAQ</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  


  

  
    
  

  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <li class=""><a href="/docs/credits/">Credits</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
</ul>

  </aside>
</div>


    <div class="like-buttons">
      <div class="github">
        <iframe src="/github-btn.html?user=nviennot&repo=nobrainer&type=watch&count=true"
          allowtransparency="true" frameborder="0" scrolling="0" width="100" height="20"></iframe>
      </div>

      <div class="twitter">
        <a href="https://twitter.com/nviennot" class="twitter-follow-button" data-show-count="false" data-lang="en">Follow @nviennot</a>
       <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
      </div>

    </div>

    <div class="unit four-fifths">
      <article>
        <h1>Changelog</h1>
        
<h3 id="git_head">git HEAD</h3>

<ul>
<li>Added <code>order()</code> to be an alias of <code>order_by()</code> <a href="https://github.com/nviennot/nobrainer/issues/194">#194</a>.</li>

<li>Added Rails 5 compatiblity <a href="https://github.com/nviennot/nobrainer/issues/191">#191</a>.</li>

<li>Added <code>attribute_will_change!()</code> for compatiblity as an no-op.</li>
</ul>

<h3 id="0310__feb_7_2016">0.31.0 – Feb. 7, 2016</h3>

<ul>
<li>Allow <code>belongs_to</code> associations to be used in <code>upsert()</code> <a href="https://github.com/nviennot/nobrainer/issues/186">#186</a>.</li>

<li>Added <code>:uniq</code> and <code>:unique</code> options shorthands to the <code>belongs_to</code> keyword.</li>

<li>Allow self-referential <code>belongs_to</code> association <a href="https://github.com/nviennot/nobrainer/issues/184">#184</a>.</li>

<li>Primary key time offset operates on a fixed timezone.</li>

<li>Guard against partial model definitions.</li>

<li>Use index for <code>where(XXX.defined =&gt; true)</code> queries <a href="https://github.com/nviennot/nobrainer/issues/180">#180</a>.</li>

<li>Fixed lazy fetching when fetching an undefined value.</li>

<li>Added back <code>model.update_attributes()</code> for compatibility with other gems.</li>
</ul>

<h3 id="0300__oct_3_2015">0.30.0 – Oct. 3, 2015</h3>

<ul>
<li>Fix problem with joins and nil join keys.</li>

<li>Add virtual attributes that can be specified with custom RQL.</li>

<li>Implementation of <code>NoBrainer::ReentrantLock</code>. Like <code>Lock</code>, but can be locked multiple times before being unlocked <a href="https://github.com/nviennot/nobrainer/issues/160">#160</a>.</li>

<li>Allow compound indexes to be declared with an implicit name.</li>

<li>Allow polymorphic queries with <code>first_or_create</code> under certain conditions.</li>
</ul>

<h3 id="0290__aug_19_2015">0.29.0 – Aug. 19, 2015</h3>

<ul>
<li>When redefining the primary key, the default primary key generator is no longer used.</li>

<li>Try to emit validation errors when <code>upsert()</code> fails with missing keys.</li>

<li><code>upsert()</code> updates the document when found.</li>

<li>Allow <code>:class</code> to be used as a shorthand for <code>:class_name</code> in association declarations.</li>

<li>Cleaned up the rake tasks. Added <code>rake nobrainer:rebalance</code>.</li>

<li>Removed the query retry on connection failure. This was useful when <code>r.table().wait</code> was not available.</li>

<li>Added support for EventMachine by using fibers.</li>

<li>Added support for the <code>Enum</code> type, which adds a few helper methods similar to ActiveRecord <a href="https://github.com/nviennot/nobrainer/issues/153">#153</a>.</li>

<li>Added hooks <code>nobrainer_field_defined</code> and <code>nobrainer_field_undefined</code> for custom types which are triggered when a field is defined and undefined.</li>
</ul>

<h3 id="0280__aug_2_2015">0.28.0 – Aug. 2, 2015</h3>

<ul>
<li>Added SSL options for encrypted connections to the server.</li>

<li>Added <code>criteria.join()</code> to perform inner joins on associations.</li>

<li>Added <code>instance.unset(attr)</code> to remove a field from the document.</li>

<li>Added <code>Model.upsert()</code> which uses <code>first_or_create</code> behind the scenes.</li>

<li>Added <code>_where()</code> to allow unsafe <code>where()</code> operation (which disables type checking, and enable dynamic attributes).</li>

<li>Added the where modifier <code>undefined</code> as a shortcut for <code>where(:field.defined =&gt; !value)</code>.</li>

<li>Added the where modifier <code>include</code> as a shortcut for <code>where(:field.any.eq =&gt; value)</code>.</li>

<li>Minor bug fixes with lazy fetching logic and atomic operations.</li>

<li>Provide a <code>NoBrainer.eager_load(docs, ...)</code> method to eager load associations on a given array of model instances.</li>

<li>Allowing to specify multiple <code>rethinkdb_urls</code> in the configuration to provide fault tolerance capabilities.</li>

<li>Added system table models (e.g. <code>NoBrainer::System::TableConfig</code>).</li>

<li>Allow tables to be configured (e.g. shards, replicas) with a task <code>rake
nobrainer:sync_schema</code> to apply these settings.</li>

<li>Bug fix: fix conflicting keys logic between where() and first_or_create() <a href="https://github.com/nviennot/nobrainer/issues/151">#151</a>.</li>

<li>Implemented <code>touch()</code> on model instances to update the <code>updated_at</code> field <a href="https://github.com/nviennot/nobrainer/issues/150">#150</a>.</li>
</ul>

<h3 id="0270__july_12_2015">0.27.0 – July 12, 2015</h3>

<ul>
<li><code>belongs_to</code> associations no longer use the primary key name of the target class to avoid depending on loading models in a certain order. <a href="https://github.com/nviennot/nobrainer/issues/132">#132</a>.</li>

<li>Optimized boot time.</li>

<li>Bug fix: the installer was saving its configuration file in <code>config/initializer/nobrainer.rb</code>, but should have been <code>config/initializers/nobrainer.rb</code>.</li>

<li>Added <code>Document#cache_key</code> for compatiblity with Rails caching mechanisms <a href="https://github.com/nviennot/nobrainer/issues/149">#149</a>.</li>
</ul>

<h3 id="0260__june_20_2015">0.26.0 – June 20, 2015</h3>

<ul>
<li>Added a <code>rails g nobrainer:install</code> task.</li>

<li>Updated reconnect logic to match latest RethinkDB messages.</li>

<li>Synchronizing indexes is now performed with a distributed lock to avoid races during deployments when multiple servers attempt to synchronize indexes.</li>

<li>Dirty tracking no longer go through user defined getters, but operates on internal attributes.</li>

<li>Bug fix: Previously assigned values wouldn’t necessarily receive updates when using <code>queue_atomic { }</code>.</li>
</ul>

<h3 id="0251__june_1_2015">0.25.1 – June 1, 2015</h3>

<ul>
<li>Added <code>criteria.changes()</code> which returns a changefeed.</li>

<li>Added <code>criteria.first_or_create()</code> for atomic creates.</li>

<li>Minor fix for uniqueness validators in the context of polymorphic classes.</li>

<li>Named scopes are cached when used in a chain (e.g. post.comments.recent).</li>

<li>Warn when not using <code>.raw</code> in a criteria when running under <code>run_with(profile: true)</code>.</li>

<li>Added a <code>synchronize { }</code> method for distributed locks.</li>

<li>Removed <code>criteria.scoped</code> method, it seems useless.</li>

<li>NoBrainer will now raise if a critera is leaked from a <code>NoBrainer.run_with()</code> block.</li>

<li>Removed <code>Model.store_in(db: &#39;xxx&#39;)</code> due to hard to deal with conflict semantics with <code>run_with()</code>.</li>

<li><code>NoBrainer.with_database()</code> is deprecated. <code>NoBrainer.run_with(db: &#39;xxx&#39;)</code> should be used instead.</li>

<li><code>NoBrainer.with()</code> has been renamed to <code>NoBrainer.run_with()</code>.</li>

<li>Removed <code>find_by()</code> due to conflicting semnantics with ActiveRecord <a href="https://github.com/nviennot/nobrainer/issues/145">#145</a>.</li>

<li>Allow nested hash queries (e.g. <code>Model.where(:lang =&gt; { :en =&gt; &#39;yes&#39; } })</code>)</li>
</ul>

<h3 id="0240__may_20_2015">0.24.0 – May 20, 2015</h3>

<ul>
<li><code>save</code>/<code>update</code>/<code>create</code> no longer raises on failed validations. We are back to the original ActiveRecord behavior <a href="https://github.com/nviennot/nobrainer/issues/141">#141</a>.</li>

<li>Validations are now performed before calling the <code>before_save</code> callbacks. We are back to the original ActiveRecord behavior <a href="https://github.com/nviennot/nobrainer/issues/142">#142</a>.</li>

<li>Allow circles to be used in <code>where(:field.near =&gt; circle)</code> queries.</li>

<li>Enforce valid fields in <code>order_by()</code>.</li>

<li>Allow <code>.not</code> to be chainable (e.g. <code>Model.where(:field.not.in =&gt; []</code>). Removed the <code>.nin</code> and <code>.ne</code> criteria operators.</li>

<li>Allow <code>Model.where(:field.in =&gt; [])</code> to return an empty array <a href="https://github.com/nviennot/nobrainer/issues/144">#144</a>.</li>

<li>Forbid a belongs_to’s foreign_key declaration to conflict with another belongs_to’s foreign_key.</li>

<li>Allow to find associations with classes within same module <a href="https://github.com/nviennot/nobrainer/issues/136">#136</a>.</li>

<li>Make <code>criteria.run</code> private <a href="https://github.com/nviennot/nobrainer/issues/139">#139</a>.</li>
</ul>

<h3 id="0230__apr_18_2015">0.23.0 – Apr. 18, 2015</h3>

<ul>
<li>Upgraded to RethinkDB 2.0.</li>

<li>Bug fix: <code>criteria.to_json</code> was triggering a stack overflow <a href="https://github.com/nviennot/nobrainer/issues/134">#134</a>.</li>

<li>Added a modular profiler, which feeds the logger and the rails controller runtime instrumentation <a href="https://github.com/nviennot/nobrainer/issues/130">#130</a>.</li>

<li>Validation of foreign keys in <code>belongs_to</code> associations are always validated <a href="https://github.com/nviennot/nobrainer/issues/133">#133</a>.</li>

<li>Bug fix: Associations properly support custom primary keys <a href="https://github.com/nviennot/nobrainer/issues/132">#132</a>.</li>
</ul>

<h3 id="0220__mar_7_2015">0.22.0 – Mar. 7, 2015</h3>

<ul>
<li><code>find_by()</code> introduced <a href="https://github.com/nviennot/nobrainer/issues/127">#127</a>.</li>

<li><code>find()</code> no longer applies <code>unscoped</code>.</li>

<li><code>store_in</code> accepts symbols.</li>

<li>Bug fix: NoBrainer considered all validated attributes to be DB fields.</li>
</ul>

<h3 id="0210__jan_19_2015">0.21.0 – Jan. 19, 2015</h3>

<ul>
<li>Regexp matches now support <code>/i</code> and <code>/m</code> properly: <a href="https://github.com/nviennot/nobrainer/issues/120">#120</a>.</li>

<li><code>required =&gt; true</code> validation shorthand uses the presence validator except for <code>Boolean</code> which uses the non null validator: <a href="https://github.com/nviennot/nobrainer/issues/109">#109</a>, <a href="https://github.com/nviennot/nobrainer/issues/110">#110</a>, <a href="https://github.com/nviennot/nobrainer/issues/118">#118</a>.</li>

<li>Bug fix: the uniqueness validator would raise an exception when dealing with invalid types: <a href="https://github.com/nviennot/nobrainer/issues/117">#117</a>.</li>

<li><code>auto_create_databases</code> and <code>auto_create_tables</code> are no longer configurable. Automatic database/table creation is always on.</li>

<li>Added the validation shorthands <code>min_length</code> and <code>max_length</code>.</li>

<li>Added a new type <code>Text</code> meant to be used for long strings. Regular <code>String</code> types are now limited to <code>255</code> characters. This limit is configurable with <code>config.max_string_length</code>.</li>

<li><code>ActiveModel::ForbiddenAttributesError</code> is raised if Rails controller params are passed directly to NoBrainer without using strong parameters.</li>

<li>Implementation of a distributed lock <code>NoBrainer::Lock</code>, which is used by the uniqueness validator.</li>

<li>Drop criteria cache when it has too many elements to avoid out of memory issues (configurable with <code>config.criteria_cache_max_entries</code>, defaults to <code>10,000</code>).</li>

<li>Raise errors when using attributes from controller params without sanitizing them with strong params. The check is performed during attribute assignement and in <code>where()</code> queries.</li>

<li><code>preload()</code> is now <code>eager_load()</code>.</li>

<li>default value procs are now executed in the context of the document. This is useful to set values depending on other values.</li>

<li>Added a <code>:scope</code> option for <code>has_many</code> and <code>has_many_through</code> associations. The provided scope is run in the context of the target model, which is useful to reuse named scoped: <a href="https://github.com/nviennot/nobrainer/issues/115">#115</a>.</li>

<li><code>has_many_through</code> associations have a <code>target_model</code> method to access the underlying model: <a href="https://github.com/nviennot/nobrainer/issues/114">#114</a>.</li>

<li>Allow <code>default_scope</code> to be defined multiple times on models and their subclasses. They all get to be applied: <a href="https://github.com/nviennot/nobrainer/issues/113">#113</a>.</li>

<li>Validations are only run against changed fields.</li>

<li>Atomic operations use sane default values.</li>

<li>Allow atomic values to be read, it’s easier for debugging and callbacks handlers.</li>

<li>Detect potential miseuses with <code>:or</code> arguments (<code>[{...},{...}]</code> vs <code>[...,...]</code>). Using <code>:_or</code> does not check these misuses.</li>

<li>Added a <code>:length</code> validation shorthand on field definitions.</li>

<li>Added the not null validator. <code>validates_not_null :field</code> or <code>validates :field, :not_null</code> can be used to validates non null values.</li>

<li>Bug fix: Allow <code>delete_all/update_all/replace_all</code> to operate on multi indexes.</li>

<li>Introduced <code>criteria.without_distinct</code> keyword to ommit <code>distinct</code> on multi indexes.</li>

<li>Bug fix: <code>where(:field.defined =&gt; value)</code> properly cast <code>value</code> to a boolean.</li>
</ul>

<h3 id="0200__dec_3_2014">0.20.0 – Dec. 3, 2014</h3>

<ul>
<li>Renamed <code>find!</code> to <code>find</code>. Sticking with ORMs established API to be safer overall.</li>

<li>Geo support. Introduced the <code>Geo::Point</code> type and others. Querying with <code>where(:field.near =&gt; {})</code> and <code>where(:field.intersects =&gt; geo_object)</code>.</li>

<li>Generated primary keys use a <code>[A-Za-z0-9]{14}</code> format.</li>
</ul>

<h3 id="0190__nov_17_2014">0.19.0 – Nov. 17, 2014</h3>

<ul>
<li><code>:as</code> is now <code>:store_as</code>.</li>

<li>To access a <code>multi</code> index, <code>any</code> must be used. e.g. <code>Post.where(:tags.any =&gt; &#39;tag&#39;)</code>.</li>

<li>Introducing <code>all</code> and <code>any</code> modifiers in <code>where()</code> queries.</li>

<li>Bug fix: Table creation should use the aliased primary key: <a href="https://github.com/nviennot/nobrainer/issues/80">#80</a>.</li>

<li><code>where()</code> only allow queries on known fields, unless the model uses dynamic attributes.</li>

<li><code>created_at</code> and <code>updated_at</code> can be updated.</li>

<li>Extracted the symbol decoration logic into a separate <a href="https://github.com/nviennot/symbol_decoration">gem</a>.</li>

<li>Alias <code>create!</code> to <code>create</code> to provide backward compatibility with gems.</li>

<li>Bug fix: indexed <code>:or</code> queries should return distinct elements.</li>

<li>Atomic operations seems now ready for prime time.</li>
</ul>

<h3 id="0181__nov_8_2014">0.18.1 – Nov. 8, 2014</h3>

<ul>
<li>Added <code>config.app_name</code> and <code>config.environment</code> for non Rails apps.</li>

<li><code>config.max_reconnection_tries</code> is now <code>max_retries_on_connection_failure</code>.</li>

<li>Added <code>criteria.extend()</code> to add chainable extend behavior.</li>

<li>Bug fix: more atomic operations can now be performed after <code>save()</code>.</li>

<li>Added an <code>:external</code> option to indexes.</li>

<li>Renamed index synchronization rake task to <code>nobrainer:sync_indexes</code>.</li>

<li>Indexes are kept synchronized through an auxilary table.</li>

<li>Index deletions are no longer confirmed.</li>

<li>Added a <code>:uniq</code> validation shorthand (alias of <code>:unique</code>).</li>

<li>Added a <code>:format</code> validation shorthand on field definitions.</li>

<li><code>update</code> is now an alias of <code>update_attributes</code>.</li>

<li>Renamed rake namespace from <code>db:</code> to <code>nobrainer:</code>.</li>

<li><code>config.reconnection_tries</code> defaults to 1 in development mode, or 15 otherwise.</li>

<li><code>criteria</code> is available in the middleware stack, useful for monitoring tools.</li>

<li><code>order_by</code> accepts Arrays as arguments as well.</li>

<li><code>min</code>/<code>avg</code>/<code>max</code> return <code>nil</code> by default.</li>
</ul>

<h3 id="0170__sep_25_2014">0.17.0 – Sep. 25, 2014</h3>

<ul>
<li>Implementation of atomic operations.</li>

<li><code>save()</code> is now <code>save?()</code> and <code>save!()</code> is now <code>save()</code>. Same for <code>update_attributes()</code>.</li>

<li>Added a <code>per_thread_connection</code> configuration flag (until we have a real connection pool from the driver).</li>
</ul>

<h3 id="0160__aug_27_2014">0.16.0 – Aug. 27, 2014</h3>

<ul>
<li>Added support for lazy fetching on given fields.</li>

<li>Added support for Binary types.</li>

<li>The logger shows non indexed queries.</li>

<li>Added support for <code>pluck()</code> and <code>without()</code>: <a href="https://github.com/nviennot/nobrainer/issues/86">#86</a>.</li>

<li><code>:or</code> queries are optimized to leverage indexes: <a href="https://github.com/nviennot/nobrainer/issues/86">#85</a>.</li>

<li>Added aliases support with <code>:as</code>: <a href="https://github.com/nviennot/nobrainer/issues/84">#84</a>.</li>

<li><code>with_index()</code> influences <code>order_by()</code>: <a href="https://github.com/nviennot/nobrainer/issues/82">#82</a>.</li>

<li>Added a connection lock for thread safety: <a href="https://github.com/nviennot/nobrainer/issues/80">#80</a>.</li>

<li><code>with_index()</code> can take no argument to force the use of an index.</li>

<li>Bug fix with the Rails reloader: <a href="https://github.com/nviennot/nobrainer/issues/78">#78</a>.</li>

<li>Added aggregate functions on criteria (min/max/avg/sum).</li>
</ul>

<h3 id="0150__july_27_2014">0.15.0 – July 27, 2014</h3>

<ul>
<li>Allow custom types serialization and cast methods.</li>

<li>Added local/utc timezone translation for <code>Time</code> typed attributes, configurable with <code>user_timezone</code> and <code>db_timezone</code>.</li>

<li>Added ISO8601 <code>Time</code> casting.</li>

<li>Added <code>Date</code> casting. They are stored as UTC times in the DB.</li>

<li>Added a <code>defined</code> symbol modifier to test for undefined fields.</li>

<li>Added a <code>sample</code> method to pick a random document.</li>

<li>Added a <code>:in</code> field definition shorthand for inclusion validation.</li>

<li>Support types and indexes when using Rails scaffolding by Josh Kuhn for <a href="http://rethinkdb.com/docs/rails/">http://rethinkdb.com/docs/rails/</a></li>
</ul>

<h3 id="0140__june_17_2014">0.14.0 – June 17, 2014</h3>

<ul>
<li>Added custom primary keys support.</li>

<li>Optimized certain queries.</li>

<li>Added some parallel testing (with <code>rake</code>)</li>

<li>Updated to the new RethinkDB driver and its new JSON transport mechanism.</li>
</ul>

<h3 id="0131__march_31_2014">0.13.1 – March 31, 2014</h3>

<ul>
<li><code>update_indexes</code> waits for completion by default.</li>

<li>Added the <code>nin</code> operator for <code>where()</code> queries.</li>

<li>Renamed <code>AssociationNotSaved</code> to <code>AssociationNotPersisted</code>.</li>

<li>Added a <code>:unique =&gt; true</code> options on fields as a shorthand for the unique validation.</li>

<li>Added support for queries on belongs_to associations. e.g. <code>Comment.where(:post =&gt; Post.first)</code>.</li>

<li>Added support for distributed locks when performing uniqueness validations.</li>

<li>Removed the <code>document.attributes=</code> accessor.</li>

<li>Bug fix: document dirtiness is now properly cleaned after a database read.</li>

<li><code>Symbol</code> typed fields are now read back from the database as symbols and not strings.</li>

<li>Bug fix: <code>before_validation</code> callbacks no longer stop the validation chain when returning <code>false</code>.</li>

<li>Added support for Rails 4.1.</li>
</ul>

<h3 id="0130__jan_12_2014">0.13.0 – Jan. 12, 2014</h3>

<ul>
<li>Removed <code>update()</code> and <code>replace()</code> for the model instance.</li>

<li>Removed <code>inc_all()</code> and <code>dec_all()</code> for criteria.</li>

<li>Reinstantiating an instance model from the database no longer goes through the setters to keep things consistent with the rest of the API.</li>

<li>Dirty tracking tracks changes from an undefined field, to a field set to <code>nil</code>.</li>

<li>Hashes are updated with <code>r.literal()</code> to avoid the use of <code>replace</code>.</li>

<li>Added a <code>:required =&gt; true</code> options on fields as a shorthand for the presence validation.</li>

<li>Improved the reconnection mechanism.</li>

<li>Added support for readonly fields.</li>

<li>Removed Rails3 compatibility.</li>
</ul>

<h3 id="0120__jan_8_2014">0.12.0 – Jan. 8, 2014</h3>

<ul>
<li>Timestamps are no longer enabled by default.</li>

<li><code>where()</code> validates and casts all the values with respect to their declared field types. This avoid potential query injections.</li>

<li>Saving a model will only update the attributes that have changed. No database update will be performed in case nothing has changed.</li>

<li><code>after_find()</code> callbacks are available on models, and also on criteria.</li>

<li>Removed <code>.to_xml</code>. This feature is still available by including a module.</li>

<li>License changed from MIT to LGPLv3.</li>
</ul>

<h3 id="0110__jan_7_2014">0.11.0 – Jan. 7, 2014</h3>

<ul>
<li>Using indexes for <code>gt</code>, <code>gte</code>, <code>lt</code>, <code>lte</code> operators when possible.</li>

<li>Renamed <code>criteria.includes()</code> to <code>criteria.preload()</code>.</li>

<li>Added a <code>:validates</code> option on fields.</li>

<li>Fixed dirty tracking with mutable values such as hashes and array.</li>

<li>Added <code>initialize</code> callbacks.</li>

<li>Boolean types adds a <code>field_name?</code> method for convenience.</li>
</ul>

<h3 id="0100__jan_6_2014">0.10.0 – Jan. 6, 2014</h3>

<ul>
<li>Fixed a <code>NameError</code> bug when trying to include the <code>DynamicAttributes</code> module. Issue: <a href="https://github.com/nviennot/nobrainer/issues/54">#54</a>.</li>

<li>Make the associations hackable.</li>

<li>Implementation of the type checking/casting mechanism.</li>
</ul>

<h3 id="091__jan_5_2014">0.9.1 – Jan. 5, 2014</h3>

<ul>
<li>Added Rails generators for models</li>

<li>Removed unecessary ActiveSupport requires.</li>
</ul>

<h3 id="090__jan_5_2014">0.9.0 – Jan. 5, 2014</h3>

<ul>
<li>Removed the <code>auto_include_timestamps</code> and <code>include_root_in_json</code> settings. Because The order in which the models are declared and NoBrainer configured affected the result. Related issue <a href="https://github.com/nviennot/nobrainer/issues/52">#52</a></li>

<li>Removed the <code>cache_documents</code> setting because it should not be broken.</li>

<li>Bug fix with <code>order_by()</code> which would try to use an index after a RQL <code>filter()</code> or <code>get_all()</code>.</li>

<li><code>includes()</code> no longer kill the criteria cache.</li>

<li>Loading a <code>has_many</code> association will set the corresponding <code>belongs_to</code> association, with or without eager loading.</li>

<li>Added the <code>has_many through</code> association. The implementation is done through eager loading.</li>

<li>Added the <code>has_one</code> association.</li>

<li>Renamed <code>with_options()</code> -&gt; <code>with()</code>.</li>
</ul>

<h3 id="080__dec_31_2013">0.8.0 – Dec. 31, 2013</h3>

<ul>
<li>First documented release of NoBrainer.</li>
</ul>

      </article>
    </div>

    <div class="clear"></div>

  </div>
</section>


  <footer>
  <div class="grid">
    <div class="unit whole">
      NoBrainer is written and maintained by
      <a href="https://twitter.com/nviennot">Nicolas Viennot</a>.
    </div>
  </div>
</footer>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46753546-1', 'nobrainer.io');
  ga('send', 'pageview');
</script>

</body>
</html>
